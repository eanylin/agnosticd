{
   "apiVersion": "1.0.0",
   "metadata": {
      "generateName": "{{user}}-workspace"
   },
   "projects": [
      {
         "source": {
            "type": "git",
            "location": "https://github.com/tsailiming/datascience-examples.git"
         },
         "name": "datascience-examples"
      }
   ],
   "components": [
      {
         "id": "ms-python/python/latest",
         "memoryLimit": "1Gi",
         "type": "chePlugin"
      },
      {
         "alias": "python-tools",
         "mountSources": true,
         "type": "openshift",
         "reference": "python.yaml",
         "referenceContent": "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: python-tools\n  labels:\n    app: python-tools        \nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: python-tools\n  template:\n    metadata:\n      name: python-tools\n    spec:\n      containers:\n      - image: registry.redhat.io/codeready-workspaces/stacks-python-rhel8@sha256:2058a74f04a03b125e40006496c1a363ea34dd354cfceaa0f5a3faae934e4ecb\n        name: seldon\n        ports:\n        - containerPort: 5000\n          name: http-server\n        volumeMounts:\n        - mountPath: /projects\n          name: projects\n        env:\n          - name: MLFLOW_EXPERIMENT_NAME\n            value: Dev\n        envFrom:\n        - secretRef:\n            name: {{user}}-mlflow-obc\n        - configMapRef:\n            name: {{user}}-mlflow-obc\n        - configMapRef:\n            name: {{user}}-mlflow-cm\n      volumes:\n      - name: projects\n        persistentVolumeClaim:\n          claimName: projects\n"
      }
   ],
   "commands": [
      {
         "name": "Login to OpenShift",
         "actions": [
            {
               "type": "exec",
               "component": "python-tools",
               "command": "oc login https://$KUBERNETES_SERVICE_HOST:$KUBERNETES_SERVICE_PORT --insecure-skip-tls-verify=true",
               "workdir": "${CHE_PROJECTS_ROOT}"
            }
         ]
      },
      {
         "name": "2 - Convert notebooks to py",
         "actions": [
            {
               "workdir": "${CHE_PROJECTS_ROOT}/datascience-examples/workshop",
               "type": "exec",
               "command": "bin/nb2py.sh",
               "component": "python-tools"
            }
         ]
      }
   ]
}